<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—ë„ˆì§€ ë¶„ì„ - ì—ë„ˆì§€ ì ˆì•½ í”Œë«í¼</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold text-primary" href="index.html">âš¡ ì—ë„ˆì§€ì ˆì•½</a>
            <a href="dashboard.html" class="text-muted">â† ëŒ€ì‹œë³´ë“œë¡œ</a>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <h2 class="fw-bold mb-4">ì—ë„ˆì§€ ë¶„ì„</h2>
                <p class="text-muted mb-5">ë°ëª¨ ìƒ˜í”Œì„ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ ì…ë ¥í•˜ì—¬ ë¶„ì„í•˜ì„¸ìš”</p>

                <!-- ë°ëª¨ ìƒ˜í”Œ -->
                <div class="card mb-4 border-0 shadow-sm">
                    <div class="card-body p-4">
                        <h5 class="fw-bold mb-3">ğŸš€ ë¹ ë¥¸ ì²´í—˜: ë°ëª¨ ìƒ˜í”Œ</h5>
                        <div class="row g-3" id="demoSamples">
                            <div class="col-md-4">
                                <button class="btn btn-outline-primary w-100 p-3 demo-sample" 
                                        data-type="ì•„íŒŒíŠ¸" data-area="84" data-usage="350">
                                    <strong>ì•„íŒŒíŠ¸</strong><br>
                                    <small class="text-muted">84ã¡, ì›” 350kWh</small>
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-primary w-100 p-3 demo-sample"
                                        data-type="ì£¼íƒ" data-area="120" data-usage="450">
                                    <strong>ì£¼íƒ</strong><br>
                                    <small class="text-muted">120ã¡, ì›” 450kWh</small>
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button class="btn btn-outline-primary w-100 p-3 demo-sample"
                                        data-type="ì˜¤í”¼ìŠ¤í…”" data-area="60" data-usage="280">
                                    <strong>ì˜¤í”¼ìŠ¤í…”</strong><br>
                                    <small class="text-muted">60ã¡, ì›” 280kWh</small>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì§ì ‘ ì…ë ¥ í¼ -->
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-5">
                        <h5 class="fw-bold mb-4">ë˜ëŠ” ì§ì ‘ ì…ë ¥</h5>
                        <form id="analyzeForm">
                            <div class="mb-4">
                                <label for="houseType" class="form-label">ì£¼íƒ ìœ í˜•</label>
                                <select class="form-select" id="houseType" required>
                                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                    <option value="ì•„íŒŒíŠ¸">ì•„íŒŒíŠ¸</option>
                                    <option value="ì£¼íƒ">ì£¼íƒ</option>
                                    <option value="ì˜¤í”¼ìŠ¤í…”">ì˜¤í”¼ìŠ¤í…”</option>
                                </select>
                            </div>

                            <div class="mb-4">
                                <label for="area" class="form-label">ë©´ì  (ã¡)</label>
                                <input type="number" class="form-control" id="area" placeholder="ì˜ˆ: 84" required>
                            </div>

                            <div class="mb-4">
                                <label for="monthlyUsage" class="form-label">ì›” ì „ê¸° ì‚¬ìš©ëŸ‰ (kWh)</label>
                                <input type="number" class="form-control" id="monthlyUsage" placeholder="ì˜ˆ: 350" required>
                                <small class="text-muted">ì „ê¸° ìš”ê¸ˆ ê³ ì§€ì„œì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤</small>
                            </div>

                            <button type="submit" class="btn btn-primary btn-lg w-100">
                                ì‹¤ì œ ì§€ì›ì‚¬ì—… ì°¾ê¸°
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/common.js"></script>
    <script>
        // ë°ëª¨ ìƒ˜í”Œ í´ë¦­
        document.querySelectorAll('.demo-sample').forEach(btn => {
            btn.addEventListener('click', function() {
                document.getElementById('houseType').value = this.dataset.type;
                document.getElementById('area').value = this.dataset.area;
                document.getElementById('monthlyUsage').value = this.dataset.usage;
            });
        });

        // ë¶„ì„ í¼ ì œì¶œ
        document.getElementById('analyzeForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const houseType = document.getElementById('houseType').value;
            const area = parseInt(document.getElementById('area').value);
            const monthlyUsage = parseInt(document.getElementById('monthlyUsage').value);

            // ë¶„ì„ ê²°ê³¼ë¥¼ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³  ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™
            try {
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ houseType, area, monthlyUsage })
                });

                const data = await response.json();

                if (data.success) {
                    localStorage.setItem('analysisResult', JSON.stringify({
                        houseType,
                        area,
                        monthlyUsage,
                        ...data.analysis
                    }));
                    window.location.href = 'results.html';
                } else {
                    alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                alert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        });
    </script>
</body>
</html>

